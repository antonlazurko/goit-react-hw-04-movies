(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[3],{120:function(e,t,n){"use strict";n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return b}));var a=n(121),c=n.n(a),i=n(122),s="https://api.themoviedb.org/3",o="d66f8875c56322c0e6582f80570eea14";function r(){return l.apply(this,arguments)}function l(){return(l=Object(i.a)(c.a.mark((function e(){var t,n,a=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",e.next=3,fetch(t);case 3:if(!(n=e.sent).ok){e.next=10;break}return e.next=7,n.json();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=Promise.reject(new Error("Not found"));case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return r("".concat(s,"/trending/all/day?api_key=").concat(o))}var u=function(e,t){return r("".concat(s,"/search/movie?api_key=").concat(o,"&query=").concat(e,"&page=").concat(t))};function j(e){return r("".concat(s,"/movie/").concat(e,"?api_key=").concat(o))}function v(e){return r("".concat(s,"/movie/").concat(e,"/credits?api_key=").concat(o))}function b(e){return r("".concat(s,"/movie/").concat(e,"/reviews?api_key=").concat(o))}},124:function(e,t,n){"use strict";t.a={IDLE:"idle",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"}},133:function(e,t,n){e.exports={movieCard:"MovieDetailsPage_movieCard__3n0Mm",reliese:"MovieDetailsPage_reliese__1s9qq",poster:"MovieDetailsPage_poster__22liw",descr:"MovieDetailsPage_descr__3LmSN",text:"MovieDetailsPage_text__2r0lZ",image:"MovieDetailsPage_image__CWh_l",Cast:"MovieDetailsPage_Cast__L5JPT",Reviews:"MovieDetailsPage_Reviews__Xo9M3",buttonsArea:"MovieDetailsPage_buttonsArea__LmNys"}},152:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var a=n(4),c=n(33),i=n(2),s=n(126),o=n(16),r=n(20),l=n(120),d=n(135),u=n.n(d),j=n(134),v=n.n(j),b=n(69),h=n(40),f=n(124),m=n(133),O=n.n(m),p=n(117),x=n(116),_={id:"string",name:"string",title:"string",poster_path:"string",release_date:"string",overview:"string"},g=Object(i.lazy)((function(){return n.e(5).then(n.bind(null,139))})),D=Object(i.lazy)((function(){return n.e(1).then(n.bind(null,140))})),E=Object(i.lazy)((function(){return n.e(6).then(n.bind(null,142))}));function w(){var e=Object(i.useContext)(b.FirebaseContext),t=e.firestore,n=e.auth,d=Object(i.useState)(_),j=Object(c.a)(d,2),m=j[0],w=j[1],N=Object(i.useState)(f.a.IDLE),C=Object(c.a)(N,2),y=C[0],k=C[1],P=Object(i.useState)(""),M=Object(c.a)(P,2),R=M[0],I=M[1],L=Object(h.a)(n),S=Object(c.a)(L,1)[0],J=Object(s.a)(null===t||void 0===t?void 0:t.collection("".concat(null===S||void 0===S?void 0:S.displayName)),{snapshotListenOptions:{includeMetadataChanges:!0}}),z=Object(c.a)(J,1)[0],A=Object(o.i)().movieId,T=null===z||void 0===z?void 0:z.find((function(e){return e.movieId==="".concat(A)})),q=Object(o.j)(),G=q.url,V=q.path,F=Object(o.g)(),B=Object(o.h)();return Object(i.useEffect)((function(){k(f.a.PENDING),l.b(A).then((function(e){w(e),k(f.a.RESOLVED)})).catch((function(e){I(e),k(f.a.REJECTED)}))}),[A]),Object(a.jsxs)(a.Fragment,{children:[y===f.a.PENDING&&Object(a.jsx)("p",{children:"Download movie"}),y===f.a.REJECTED&&Object(a.jsx)(g,{error:R}),y===f.a.RESOLVED&&Object(a.jsxs)(p.a,{fixed:!0,children:[Object(a.jsxs)("div",{className:O.a.buttonsArea,children:[Object(a.jsxs)(x.a,{"aria-label":"delete",onClick:function(){var e;(null===B||void 0===B||null===(e=B.state)||void 0===e?void 0:e.from)?F.push(B.state.from):F.push(B.state.from="/movies")},children:[Object(a.jsx)(v.a,{fontSize:"small"}),"Back"]}),Object(a.jsxs)(x.a,{disabled:!S||!!T,"aria-label":"delete",onClick:function(){null===t||void 0===t||t.collection("".concat(null===S||void 0===S?void 0:S.displayName)).doc("movieId".concat(A)).set({movieId:A}).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))},children:[Object(a.jsx)(u.a,{fontSize:"small"}),S?T?" Movie already exist":" Add to favorites":" Login to enable adding"]})]}),Object(a.jsx)("h2",{children:m.title}),Object(a.jsxs)("div",{className:O.a.movieCard,children:[Object(a.jsx)("div",{className:O.a.poster,children:m.poster_path&&Object(a.jsx)("img",{className:O.a.image,src:"https://image.tmdb.org/t/p/w500/".concat(m.poster_path),alt:m.title})}),Object(a.jsxs)("div",{className:O.a.descr,children:[Object(a.jsxs)("div",{className:O.a.reliese,children:["Release date: ",m.release_date]}),Object(a.jsx)("div",{className:O.a.text,children:m.overview})]})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(r.c,{to:{pathname:"".concat(G,"/Cast"),state:{from:B}},className:O.a.Cast,children:['Cast of "',m.title,'" movie']}),Object(a.jsxs)(r.c,{to:{pathname:"".concat(G,"/Reviews"),state:{from:B}},className:O.a.Reviews,children:['Reviews of "',m.title,'" movie']}),Object(a.jsx)("hr",{}),Object(a.jsxs)(i.Suspense,{fallback:Object(a.jsx)("div",{children:"Downloading..."}),children:[Object(a.jsx)(o.b,{path:"".concat(V,"/Cast"),children:Object(a.jsx)(D,{movieId:A})}),Object(a.jsx)(o.b,{path:"".concat(V,"/Reviews"),children:Object(a.jsx)(E,{movieId:A})})]})]})]})]})}}}]);
//# sourceMappingURL=MovieDetailsPage.ea3126a3.chunk.js.map