(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[4],{113:function(t,e,n){"use strict";n.d(e,"e",(function(){return j})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return b})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return d}));var c=n(114),a=n.n(c),r=n(115),o="https://api.themoviedb.org/3",i="d66f8875c56322c0e6582f80570eea14";function s(){return u.apply(this,arguments)}function u(){return(u=Object(r.a)(a.a.mark((function t(){var e,n,c=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:"",t.next=3,fetch(e);case 3:if(!(n=t.sent).ok){t.next=10;break}return t.next=7,n.json();case 7:t.t0=t.sent,t.next=11;break;case 10:t.t0=Promise.reject(new Error("Not found"));case 11:return t.abrupt("return",t.t0);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(){return s("".concat(o,"/trending/all/day?api_key=").concat(i))}var l=function(t,e){return s("".concat(o,"/search/movie?api_key=").concat(i,"&query=").concat(t,"&page=").concat(e))};function b(t){return s("".concat(o,"/movie/").concat(t,"?api_key=").concat(i))}function f(t){return s("".concat(o,"/movie/").concat(t,"/credits?api_key=").concat(i))}function d(t){return s("".concat(o,"/movie/").concat(t,"/reviews?api_key=").concat(i))}},117:function(t,e,n){"use strict";e.a={IDLE:"idle",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"}},123:function(t,e,n){t.exports={list:"MoviesView_list__15dqM",item:"MoviesView_item__1Zm0g",title:"MoviesView_title__K0mGv"}},148:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return D}));var c=n(6),a=n(135),r=n(136),o=n(38),i=n(2),s=n(27),u=n(120),j=n(142),l=n(143),b=n(108),f=n(124),d=n.n(f),m=n(13),h=n(113),O=n(122),p=n.n(O),v=n(104),E=n(149),x=n(146),g=(n(121),Object(v.a)((function(t){return Object(E.a)({root:{"& > *":{margin:t.spacing(1)}}})})));function S(t){var e=t.onSearchbarSubmit,n=g(),a=Object(i.useState)(""),r=Object(o.a)(a,2),s=r[0],j=r[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{className:n.root,onSubmit:function(t){t.preventDefault(),""!==s.trim()?(e(s.toLowerCase()),j("")):Object(u.b)("Type something to find.")},noValidate:!0,autoComplete:"off",children:[Object(c.jsx)(x.a,{placeholder:"Search movies",inputProps:{"aria-label":"description"},value:s,type:"text",autoComplete:"off",autoFocus:!0,onChange:function(t){return j(t.currentTarget.value)}}),Object(c.jsx)(b.a,{variant:"contained",color:"secondary",size:"small",type:"submit",startIcon:Object(c.jsx)(p.a,{}),children:"Search"})]})})}var w=n(117),y=n(123),_=n.n(y);function D(){var t,e=Object(m.g)(),n=Object(m.h)(),f=Object(i.useState)(null!==(t=new URLSearchParams(n.search).get("query"))&&void 0!==t?t:""),O=Object(o.a)(f,2),p=O[0],v=O[1],E=Object(i.useState)(1),x=Object(o.a)(E,2),g=x[0],y=x[1],D=Object(i.useState)([]),k=Object(o.a)(D,2),N=k[0],C=k[1],L=Object(i.useState)(w.a.IDLE),R=Object(o.a)(L,2),V=R[0],I=R[1],P=Object(i.useState)(""),T=Object(o.a)(P,2),J=T[0],q=T[1];Object(i.useEffect)((function(){y(1),C([])}),[p]);return Object(i.useEffect)((function(){""!==p&&(I(w.a.PENDING),h.d(p,g).then((function(t){var e=t.results;C((function(t){return[].concat(Object(a.a)(t),Object(a.a)(e))})),I(w.a.RESOLVED),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(t){q(t),I(w.a.REJECTED)})))}),[p,g]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(S,{onSearchbarSubmit:function(t){e.push(Object(r.a)(Object(r.a)({},n),{},{search:"query=".concat(t)})),v(t)}}),Object(c.jsx)(u.a,{autoClose:3e3,position:"top-center"}),V===w.a.PENDING&&Object(c.jsx)("p",{children:"Download movie collection"}),V===w.a.REJECTED&&Object(c.jsx)("p",{children:J}),V===w.a.RESOLVED&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(j.a,{children:N.map((function(t){return Object(c.jsx)(l.a,{className:_.a.item,children:Object(c.jsx)(s.b,{className:_.a.title,to:{pathname:"/movies/".concat(t.id),state:{from:n}},children:t.title})},t.id)}))}),N.length>0&&Object(c.jsxs)(b.a,{onClick:function(){return y((function(t){return t+1}))},variant:"outlined",children:["Load more",Object(c.jsx)(d.a,{fontSize:"small"})]})]})]})}}}]);
//# sourceMappingURL=MoviesView.e6751a7b.chunk.js.map