(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[4],{119:function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return j})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return d}));var c=n(120),a=n.n(c),r=n(121),o="https://api.themoviedb.org/3",i="d66f8875c56322c0e6582f80570eea14";function s(){return u.apply(this,arguments)}function u(){return(u=Object(r.a)(a.a.mark((function e(){var t,n,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",e.next=3,fetch(t);case 3:if(!(n=e.sent).ok){e.next=10;break}return e.next=7,n.json();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=Promise.reject(new Error("Not found"));case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return s("".concat(o,"/trending/all/day?api_key=").concat(i))}var j=function(e,t){return s("".concat(o,"/search/movie?api_key=").concat(i,"&query=").concat(e,"&page=").concat(t))};function b(e){return s("".concat(o,"/movie/").concat(e,"?api_key=").concat(i))}function f(e){return s("".concat(o,"/movie/").concat(e,"/credits?api_key=").concat(i))}function d(e){return s("".concat(o,"/movie/").concat(e,"/reviews?api_key=").concat(i))}},123:function(e,t,n){"use strict";t.a={IDLE:"idle",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"}},129:function(e,t,n){e.exports={list:"MoviesView_list__15dqM",item:"MoviesView_item__1Zm0g",title:"MoviesView_title__K0mGv"}},155:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return D}));var c=n(4),a=n(142),r=n(143),o=n(33),i=n(2),s=n(24),u=n(126),l=n(149),j=n(150),b=n(115),f=n(130),d=n.n(f),h=n(16),m=n(119),p=n(128),O=n.n(p),v=n(109),x=n(156),E=n(153),g=(n(127),Object(v.a)((function(e){return Object(x.a)({root:{marginTop:"40px"},searchBar:{display:"flex",justifyContent:"center"}})})));function S(e){var t=e.onSearchbarSubmit,n=g(),a=Object(i.useState)(""),r=Object(o.a)(a,2),s=r[0],l=r[1];return Object(c.jsx)("div",{className:n.searchBar,children:Object(c.jsxs)("form",{className:n.root,onSubmit:function(e){e.preventDefault(),""!==s.trim()?(t(s.toLowerCase()),l("")):Object(u.b)("Type something to find.")},noValidate:!0,autoComplete:"off",children:[Object(c.jsx)(E.a,{placeholder:"Search movies",inputProps:{"aria-label":"description"},value:s,type:"text",autoComplete:"off",autoFocus:!0,onChange:function(e){return l(e.currentTarget.value)}}),Object(c.jsx)(b.a,{variant:"contained",color:"secondary",size:"small",type:"submit",startIcon:Object(c.jsx)(O.a,{}),children:"Search"})]})})}var y=n(123),w=n(129),_=n.n(w);function D(){var e,t=Object(h.g)(),n=Object(h.h)(),f=Object(i.useState)(null!==(e=new URLSearchParams(n.search).get("query"))&&void 0!==e?e:""),p=Object(o.a)(f,2),O=p[0],v=p[1],x=Object(i.useState)(1),E=Object(o.a)(x,2),g=E[0],w=E[1],D=Object(i.useState)([]),k=Object(o.a)(D,2),N=k[0],C=k[1],L=Object(i.useState)(y.a.IDLE),R=Object(o.a)(L,2),T=R[0],V=R[1],I=Object(i.useState)(""),P=Object(o.a)(I,2),J=P[0],q=P[1];Object(i.useEffect)((function(){w(1),C([])}),[O]);return Object(i.useEffect)((function(){""!==O&&(V(y.a.PENDING),m.d(O,g).then((function(e){var t=e.results;C((function(e){return[].concat(Object(a.a)(e),Object(a.a)(t))})),V(y.a.RESOLVED),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){q(e),V(y.a.REJECTED)})))}),[O,g]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(S,{onSearchbarSubmit:function(e){t.push(Object(r.a)(Object(r.a)({},n),{},{search:"query=".concat(e)})),v(e)}}),Object(c.jsx)(u.a,{autoClose:3e3,position:"top-center"}),T===y.a.PENDING&&Object(c.jsx)("p",{children:"Download movie collection"}),T===y.a.REJECTED&&Object(c.jsx)("p",{children:J}),T===y.a.RESOLVED&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(l.a,{children:N.map((function(e){return Object(c.jsx)(j.a,{className:_.a.item,children:Object(c.jsx)(s.b,{className:_.a.title,to:{pathname:"/movies/".concat(e.id),state:{from:n}},children:e.title})},e.id)}))}),N.length>0&&Object(c.jsxs)(b.a,{onClick:function(){return w((function(e){return e+1}))},variant:"outlined",children:["Load more",Object(c.jsx)(d.a,{fontSize:"small"})]})]})]})}}}]);
//# sourceMappingURL=MoviesView.1de3172f.chunk.js.map