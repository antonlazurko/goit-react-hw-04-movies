(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[11],{113:function(e,t,n){"use strict";n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return m}));var r=n(114),o=n.n(r),a=n(115),i="https://api.themoviedb.org/3",c="d66f8875c56322c0e6582f80570eea14";function s(){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(o.a.mark((function e(){var t,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,fetch(t);case 3:if(!(n=e.sent).ok){e.next=10;break}return e.next=7,n.json();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=Promise.reject(new Error("Not found"));case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return s("".concat(i,"/trending/all/day?api_key=").concat(c))}var d=function(e,t){return s("".concat(i,"/search/movie?api_key=").concat(c,"&query=").concat(e,"&page=").concat(t))};function v(e){return s("".concat(i,"/movie/").concat(e,"?api_key=").concat(c))}function f(e){return s("".concat(i,"/movie/").concat(e,"/credits?api_key=").concat(c))}function m(e){return s("".concat(i,"/movie/").concat(e,"/reviews?api_key=").concat(c))}},118:function(e,t,n){e.exports={title:"HomeView_title__35BlT",list:"HomeView_list__1sizy",item:"HomeView_item__A1DJP",name:"HomeView_name__1dDaR",deleteBtn:"HomeView_deleteBtn__2flHo"}},128:function(e,t,n){"use strict";var r=n(61),o=n(62);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(2)),i=(0,r(n(63)).default)(a.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=i},147:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(38),a=n(2),i=function(e,t,n,r,o){if(e.exists){var a=e.data(t);return o&&(a=o(a)),n&&(a[n]=e.id),r&&(a[r]=e.ref),a}},c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=function(e){return{loading:void 0===e||null===e,value:e}},l=function(e){var t=e?e():void 0,n=Object(a.useReducer)((function(e,t){switch(t.type){case"error":return c({},e,{error:t.error,loading:!1,value:void 0});case"reset":return s(t.defaultValue);case"value":return c({},e,{error:void 0,loading:!1,value:t.value});default:return e}}),s(t)),r=n[0],o=n[1],i=function(){var t=e?e():void 0;o({type:"reset",defaultValue:t})},l=function(e){o({type:"error",error:e})},u=function(e){o({type:"value",value:e})};return Object(a.useMemo)((function(){return{error:r.error,loading:r.loading,reset:i,setError:l,setValue:u,value:r.value}}),[r.error,r.loading,i,l,u,r.value])},u=function(e,t){var n=!e&&!t,r=!!e&&!!t&&e.isEqual(t);return n||r},d=function(e,t){return function(e,t,n){var r=Object(a.useRef)(e);return Object(a.useEffect)((function(){t(e,r.current)||(r.current=e,n&&n())})),r}(e,u,t)},v=function(e,t,n){var r=l(),o=r.error,i=r.loading,c=r.reset,s=r.setError,u=r.setValue,v=r.value,f=d(t,c);Object(a.useEffect)((function(){if(f.current){if(e){var t=n&&n.snapshotListenOptions?f.current.onSnapshot(n.snapshotListenOptions,u,s):f.current.onSnapshot(u,s);return function(){t()}}f.current.get(n?n.getOptions:void 0).then(u).catch(s)}else u(void 0)}),[f.current]);var m=[v,i,o];return Object(a.useMemo)((function(){return m}),m)},f=function(e,t,n){var r=n?n.idField:void 0,o=n?n.refField:void 0,c=n?n.snapshotOptions:void 0,s=n?n.transform:void 0,l=v(e,t,n),u=l[0],d=l[1],f=l[2],m=[Object(a.useMemo)((function(){return u?u.docs.map((function(e){return i(e,c,r,o,s)})):void 0}),[u,c,r,o,s]),d,f];return Object(a.useMemo)((function(){return m}),m)},m=n(13),p=n(27),b=n(128),h=n.n(b),j=n(143),g=n(3),O=n(7),y=(n(14),n(8)),x=n(15),_=a.forwardRef((function(e,t){var n=e.classes,r=e.className,o=Object(O.a)(e,["classes","className"]);return a.createElement("div",Object(g.a)({className:Object(y.a)(n.root,r),ref:t},o))}));_.muiName="ListItemSecondaryAction";var k=Object(x.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(_),w=n(18),E=n(87),R=n(11),S=a.forwardRef((function(e,t){var n=e.edge,r=void 0!==n&&n,o=e.children,i=e.classes,c=e.className,s=e.color,l=void 0===s?"default":s,u=e.disabled,d=void 0!==u&&u,v=e.disableFocusRipple,f=void 0!==v&&v,m=e.size,p=void 0===m?"medium":m,b=Object(O.a)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return a.createElement(E.a,Object(g.a)({className:Object(y.a)(i.root,c,"default"!==l&&i["color".concat(Object(R.a)(l))],d&&i.disabled,"small"===p&&i["size".concat(Object(R.a)(p))],{start:i.edgeStart,end:i.edgeEnd}[r]),centerRipple:!0,focusRipple:!f,disabled:d,ref:t},b),a.createElement("span",{className:i.label},o))})),z=Object(x.a)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:Object(w.b)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(w.b)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(w.b)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(S),C=n(142),N=n(65),V=n(113),M=n(118),I=n.n(M);t.default=function(){var e,t=Object(a.useContext)(N.FirebaseContext).firestore,n=Object(a.useState)([]),i=Object(o.a)(n,2),c=i[0],s=i[1],l=Object(m.h)(),u=(e=null===t||void 0===t?void 0:t.collection("movies"),f(!0,e,{snapshotListenOptions:{includeMetadataChanges:!0}})),d=Object(o.a)(u,3),v=d[0],b=d[1],g=d[2],O=function(e,n){var o,a=n.find((function(t){return"".concat(t.id)===e.movieId}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(j.a,{children:[Object(r.jsx)(p.b,{to:{pathname:"/movies/".concat(null===a||void 0===a?void 0:a.id),state:{from:l}},className:I.a.name,children:null!==(o=null===a||void 0===a?void 0:a.name)&&void 0!==o?o:null===a||void 0===a?void 0:a.title}),Object(r.jsx)(k,{children:Object(r.jsx)(z,{"aria-label":"delete",onClick:function(){return n=e.movieId,void(null===t||void 0===t||t.collection("movies").doc("movieId".concat(n)).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)})));var n},children:Object(r.jsx)(h.a,{fontSize:"small"})})})]},e.movieId),Object(r.jsx)("hr",{})]})};return Object(a.useEffect)((function(){V.e().then((function(e){var t=e.results;s(t)})).catch((function(e){console.log(e)}))}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{className:I.a.title,children:(null===v||void 0===v?void 0:v.length)?"Favorites":"No one movie"}),Object(r.jsxs)(C.a,{children:[b&&Object(r.jsx)("div",{children:"Loading"}),g&&Object(r.jsx)("div",{children:g}),!b&&(null===v||void 0===v?void 0:v.map((function(e){return O(e,c)})))]})]})}}}]);
//# sourceMappingURL=11.3fb1f602.chunk.js.map