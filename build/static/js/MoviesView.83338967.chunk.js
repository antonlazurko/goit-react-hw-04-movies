(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[3],{34:function(e,t,c){"use strict";c.d(t,"e",(function(){return l})),c.d(t,"d",(function(){return b})),c.d(t,"b",(function(){return j})),c.d(t,"a",(function(){return m})),c.d(t,"c",(function(){return f}));var a=c(38),n=c.n(a),r=c(40),o="https://api.themoviedb.org/3",i="d66f8875c56322c0e6582f80570eea14";function s(){return u.apply(this,arguments)}function u(){return(u=Object(r.a)(n.a.mark((function e(){var t,c,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",e.next=3,fetch(t);case 3:if(!(c=e.sent).ok){e.next=10;break}return e.next=7,c.json();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=Promise.reject(new Error("Not found"));case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return s("".concat(o,"/trending/all/day?api_key=").concat(i))}function b(e,t){return s("".concat(o,"/search/movie?api_key=").concat(i,"&query=").concat(e,"&page=").concat(t))}function j(e){return s("".concat(o,"/movie/").concat(e,"?api_key=").concat(i))}function m(e){return s("".concat(o,"/movie/").concat(e,"/credits?api_key=").concat(i))}function f(e){return s("".concat(o,"/movie/").concat(e,"/reviews?api_key=").concat(i))}},35:function(e,t,c){"use strict";t.a={IDLE:"idle",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"}},44:function(e,t,c){e.exports={Searchbar:"Searchbar_Searchbar__28z4-",ImageGallery:"Searchbar_ImageGallery__2Ieky",ImageGalleryItem:"Searchbar_ImageGalleryItem__35Tqm",ImageGalleryItem_Image:"Searchbar_ImageGalleryItem_Image__2cM2l"}},45:function(e,t,c){e.exports={list:"MoviesView_list__1qEQb",item:"MoviesView_item__3O6Sj",title:"MoviesView_title__2hfYe"}},58:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return p}));var a=c(1),n=c(52),r=c(53),o=c(33),i=c(0),s=c(8),u=c(41),l=c(2),b=c(34),j=(c(43),c(44)),m=c.n(j);function f(e){var t=e.onSearchbarSubmit,c=Object(i.useState)(""),n=Object(o.a)(c,2),r=n[0],s=n[1];return Object(a.jsx)("header",{className:m.a.Searchbar,children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==r.trim()?(t(r.toLowerCase()),s("")):Object(u.b)("Type something to find.")},className:m.a.SearchForm,children:[Object(a.jsx)("button",{type:"submit",className:m.a.SearchFormButton,children:Object(a.jsx)("span",{className:m.a.SearchFormButtonLabel,children:"Search"})}),Object(a.jsx)("input",{className:m.a.SearchFormInput,value:r,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",onChange:function(e){s(e.currentTarget.value)}})]})})}var h=c(35),d=c(45),O=c.n(d);function p(){var e,t=Object(l.f)(),c=Object(l.g)(),j=Object(i.useState)(null!==(e=new URLSearchParams(c.search).get("query"))&&void 0!==e?e:""),m=Object(o.a)(j,2),d=m[0],p=m[1],S=Object(i.useState)(1),v=Object(o.a)(S,2),_=v[0],E=v[1],x=Object(i.useState)([]),g=Object(o.a)(x,2),y=g[0],I=g[1],N=Object(i.useState)(h.a.IDLE),w=Object(o.a)(N,2),k=w[0],D=w[1],G=Object(i.useState)(""),L=Object(o.a)(G,2),C=L[0],F=L[1];Object(i.useEffect)((function(){E(1),I([])}),[d]);return Object(i.useEffect)((function(){""!==d&&(D(h.a.PENDING),b.d(d,_).then((function(e){var t=e.results;I((function(e){return[].concat(Object(n.a)(e),Object(n.a)(t))})),D(h.a.RESOLVED)})).catch((function(e){F(e),D(h.a.REJECTED)})))}),[d,_]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f,{onSearchbarSubmit:function(e){t.push(Object(r.a)(Object(r.a)({},c),{},{search:"query=".concat(e)})),p(e)}}),Object(a.jsx)(u.a,{autoClose:3e3,position:"top-center"}),k===h.a.PENDING&&Object(a.jsx)("p",{children:"Download movie collection"}),k===h.a.REJECTED&&Object(a.jsx)("p",{children:C}),k===h.a.RESOLVED&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("ul",{className:O.a.list,children:y.map((function(e){return Object(a.jsx)("li",{className:O.a.item,children:Object(a.jsx)(s.b,{className:O.a.title,to:{pathname:"/movies/".concat(e.id),state:{from:c}},children:e.title})},e.id)}))}),Object(a.jsx)("button",{onClick:function(){return E((function(e){return e+1}))},children:"Load more"})]})]})}}}]);
//# sourceMappingURL=MoviesView.83338967.chunk.js.map